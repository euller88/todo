FROM node:16

ARG REST_ENDPOINT_SERVER
ENV REST_ENDPOINT_SERVER ${REST_ENDPOINT_SERVER}

ARG REST_ENDPOINT_CLIENT
ENV REST_ENDPOINT_CLIENT ${REST_ENDPOINT_CLIENT}

ENV APP_ROOT /src

RUN mkdir ${APP_ROOT}

WORKDIR ${APP_ROOT}

ADD . ${APP_ROOT}

RUN npm install

RUN nopm run build

ENV HOST 0.0.0.0

EXPOSE 3000

CMD [ "npm", "run", "start" ]